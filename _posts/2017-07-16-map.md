---
layout: post
title:  "Map with inset map"
date:   2017-07-11 21:24:48 +0200
categories: jekyll update
---

Way to draw map and inset map with two subplots

![figure1]

```python

from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec
from matplotlib.patches import ConnectionPatch

fig = plt.figure(figsize=(11.69,8.27), dpi=100)
gs = gridspec.GridSpec(1,2, width_ratios=[1, 2])
gs.update(left = 0.1,right = 0.91,
          bottom = 0.01, top = 0.95,
          wspace = 0.3 ) 

#create subplots
ax = fig.add_subplot(gs[0])
ax2 = fig.add_subplot(gs[1])

# borders
minlon,maxlon = 5,27
minlat,maxlat = 54,70 
minlon2,maxlon2 = 5.6,6.1
minlat2,maxlat2 = 59.9,60.2 

map = Basemap(
            resolution='l',projection='stere',
            lat_0=70,lon_0=14,
            llcrnrlon = minlon  ,llcrnrlat = minlat,
            urcrnrlon = maxlon ,urcrnrlat = maxlat,
            ax = ax)
map2 = Basemap(projection='merc',llcrnrlat = minlat2,
             urcrnrlat= maxlat2,
            llcrnrlon= minlon2, urcrnrlon= maxlon2 ,
            resolution='h', ax = ax2) 

map.drawmapboundary(fill_color='#cae2f7')
map.fillcontinents(color='#bdad95')
map.drawcoastlines(linewidth=0.5)
map2.drawmapboundary(fill_color='#cae2f7')
map2.fillcontinents(color='#bdad95')
map2.drawcoastlines(linewidth=0.5)

#specify lat and lon to show
parallels = [55,60,65,70]
meridians = [5,10,15,20]
parallels2 = [59.9,60,60.1,60.2]
meridians2 = [5.4,5.6,5.8,6]

map.drawparallels(parallels, labels = [1,1,0,0]) # draw parallels
map.drawmeridians(meridians, labels = [0,0,1,1]) 
map2.drawparallels(parallels2, labels = [1,1,1,1]) 
map2.drawmeridians(meridians2, labels = [1,1,1,1]) 

#first type of stations
lon = [5.861 , 5.7815] 
lat = [59.97478, 59.97821]
name = ['st1 ','st2']

#second type of stations
x_farm1, y_farm1 = 5.772001, 59.977903
x_farm2, y_farm2 = 5.939457, 60.106703
name_type2 = ['st3','st4']

# positions at map2 coordinates
x1,y1 = map2(lon[0],lat[0])
x2,y2 = map2(lon[1],lat[1])
x1_1,y1_1 = map(lon[0],lat[0])
x_farm1c,y_farm1c = map2(x_farm1,y_farm1)
x_farm2c,y_farm2c = map2(x_farm2,y_farm2)

# Scatter plot
map.scatter(x1_1,y1_1, 
            color ='#ff7e37',
            edgecolor = '#995f3f', s= 55,
            zorder = 10)

map2.scatter(lon, lat,latlon= True , color ='#ff7e37',
            edgecolor = '#995f3f', s= 55, zorder = 10,
            label = "Second type")

farm_color = '#f6e32c'
map2.scatter(x_farm1,y_farm1,latlon = True, marker = "*", 
              color = farm_color ,s = 85,
             edgecolor = '#b8894e',
             label = 'Third type', zorder = 10 ,alpha = 1)

map2.scatter(x_farm2,y_farm2,latlon = True, marker = "*",
              color = farm_color, s = 85,
              edgecolor = '#b8894e', zorder = 10 ,alpha = 1)

txtsize = 10

# add names of the stations
  
st = 0
for xy in ((x1,y1), (x2,y2)) :
    ax2.annotate(name[st], xy,xytext=(17, -19), size= txtsize, 
                arrowprops=dict(arrowstyle="->",connectionstyle="arc3"),
                textcoords='offset points')
    st += 1

st = 0
for xy in ((x_farm1c,y_farm1c), (x_farm2c,y_farm2c)) :
    ax2.annotate(name_type2[st], xy,xytext=(-17, -19), size= txtsize, 
                arrowprops=dict(arrowstyle="->",connectionstyle="arc3"),
                textcoords='offset points')
    st += 1  
     
# Draw lines between subplots
x_patch,y_patch = map2(minlon2, minlat2)
x_patch2,y_patch2 = map2(minlon2, maxlat2)

con = ConnectionPatch(xyA=(x_patch,y_patch), xyB=(x1_1,y1_1),
                       coordsA="data", coordsB="data",
                      axesA=ax2, axesB=ax, color="#f6e32c")
con2 = ConnectionPatch(xyA=(x_patch2,y_patch2), xyB=(x1_1,y1_1),
                        coordsA="data", coordsB="data",
                      axesA=ax2, axesB=ax, color="#f6e32c")
ax2.add_artist(con)
ax2.add_artist(con2)

plt.legend()
plt.show()

```
[comment]: <>  ( <figure class="half">)
[comment]: <>  	<img src="/assets/sed_vat_valid.jpg" alt="">
[comment]: <>  	<img src="/assets/caco3-chimney.png" alt="">
[comment]: <>  	<figcaption>Caption describing these two images.</figcaption>
[comment]: <>   </figure>

[figure1]: /assets/2maps.png
